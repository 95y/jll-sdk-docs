import{_ as t,C as p,o as r,c,k as s,a as n,H as l,w as a,Q as o}from"./chunks/framework.62b283ab.js";const V=JSON.parse('{"title":"简介","description":"","frontmatter":{},"headers":[],"relativePath":"introduction.md","filePath":"introduction.md","lastUpdated":1706077760000}'),i={name:"introduction.md"},d=o('<h1 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to &quot;简介&quot;">​</a></h1><h2 id="h5开发流程" tabindex="-1">H5开发流程 <a class="header-anchor" href="#h5开发流程" aria-label="Permalink to &quot;H5开发流程&quot;">​</a></h2><p>一.开发游戏阶段:</p><ol><li>在<a href="https://cspace.you-drama.com/#/user/login" target="_blank" rel="noreferrer">柒巧空间</a>上传剧本，得到一个 <code>剧本key</code>。同时上传剧本所需的角色列表<br><img src="https://osslarp.oss-cn-shenzhen.aliyuncs.com/pingxingshu/sdk_demo/image.png" alt="获取剧本key"></li><li>通过柒巧空间得到的key调用SDK的初始化 <code>initData</code> 接口, 返回角色列表<br><code>roleId</code> -- <code>roleName</code> -- <code>roleToken</code></li><li>开发者根据自己剧本的角色 <code>roleId</code>，角色 <code>token</code>, 操作自定义的变量<br> 自定义变量<br> -- 全局自定义变量<br> -- 角色自定义变量</li></ol><p>注:此时不需要操作APP，小程序等。</p><p><strong>二</strong>. H5游戏开发完成之后，需要配合APP，小程序来真正进行游戏。</p><ol><li>剧本配置H5地址，提交审核</li><li>剧本审核通过之后，DM用APP开房间,玩家通过小程序来玩。</li><li>小程序进行到机制阶段的时候，小程序会通过地址来告诉H5小游戏 <code>roleId</code> 和 <code>token</code> 的值。此时的 <code>roleId</code> 就是玩家开房时候选择的角色，<code>token</code> 里面是包含房间Id等一系列业务逻辑的加密值。</li><li>此时H5游戏通过 <code>roleId</code> 和 <code>token</code> 来操作sdk的接口，此时效果应该是和开发阶段一致的。</li></ol><h2 id="参数说明" tabindex="-1">参数说明： <a class="header-anchor" href="#参数说明" aria-label="Permalink to &quot;参数说明：&quot;">​</a></h2>',8),u=s("strong",null,"1、小程序&App打开H5的完整链接如下：",-1),_=s("br",null,null,-1),h=s("strong",null,[s("a",{href:"https://xn--h5-bi5cu2qkcr04j.com?token=xx&roleId=xx&userId=xx&title=xx&env=prod",target:"_blank",rel:"noreferrer"},"https://h5机制地址.com?token=xx&roleId=xx&userId=xx&title=xx&env=prod")],-1),x=s("br",null,null,-1),E=s("strong",null,"2、开发人员可在url上添加自己的url参数，小程序&App 会检测url上是否带自定义url参数",-1),y=s("br",null,null,-1),k=s("a",{href:"https://xn--h5-bi5cu2qkcr04j.com?%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B01=xx&%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B02=xx",target:"_blank",rel:"noreferrer"},"https://h5机制地址.com?自定义参数1=xx&自定义参数2=xx",-1),b=s("br",null,null,-1),A=s("br",null,null,-1),g=s("strong",null,"「自定义参数说明：如部分H5需要自己通过url携带参数用于判断当前场景等等」",-1),m=s("br",null,null,-1),f=s("strong",null,[s("a",{href:"https://xn--h5-bi5cu2qkcr04j.com?%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B01=xx&%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B02=xx&token=xx&roleId=xx&title=xx",target:"_blank",rel:"noreferrer"},"https://h5机制地址.com?自定义参数1=xx&自定义参数2=xx&token=xx&roleId=xx&title=xx")],-1),I=s("br",null,null,-1),v=s("br",null,null,-1),B=s("br",null,null,-1),C=o(`<div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">url参数字段说明：  </span></span>
<span class="line"><span style="color:#B392F0;">token</span><span style="color:#E1E4E8;">: 接口请求凭证  </span></span>
<span class="line"><span style="color:#B392F0;">roleId</span><span style="color:#E1E4E8;">: H5当前角色id  </span></span>
<span class="line"><span style="color:#B392F0;">userId</span><span style="color:#E1E4E8;">: 小程序orApp当前的用户id  </span></span>
<span class="line"><span style="color:#B392F0;">title</span><span style="color:#E1E4E8;">: 用于设置title  </span></span>
<span class="line"><span style="color:#E1E4E8;">url参数预留关键字：</span><span style="color:#B392F0;">env</span><span style="color:#E1E4E8;"> (自定义字段情况下，请勿使用env参数名)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">url参数字段说明：  </span></span>
<span class="line"><span style="color:#6F42C1;">token</span><span style="color:#24292E;">: 接口请求凭证  </span></span>
<span class="line"><span style="color:#6F42C1;">roleId</span><span style="color:#24292E;">: H5当前角色id  </span></span>
<span class="line"><span style="color:#6F42C1;">userId</span><span style="color:#24292E;">: 小程序orApp当前的用户id  </span></span>
<span class="line"><span style="color:#6F42C1;">title</span><span style="color:#24292E;">: 用于设置title  </span></span>
<span class="line"><span style="color:#24292E;">url参数预留关键字：</span><span style="color:#6F42C1;">env</span><span style="color:#24292E;"> (自定义字段情况下，请勿使用env参数名)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">Q &amp; A：  </span></span>
<span class="line"><span style="color:#e1e4e8;">Q: H5中如何获取当前角色？  </span></span>
<span class="line"><span style="color:#e1e4e8;">A: 开发阶段可通过url上自己拼接roleId (角色ID)，进行对应角色的机制开发</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">Q: token哪里获取？  </span></span>
<span class="line"><span style="color:#e1e4e8;">A: 开发阶段: 可在柒巧空间的剧本编辑中，获取该剧本联调SDK的token  </span></span>
<span class="line"><span style="color:#e1e4e8;">提测&amp;生产阶段：通过url截取token参数值</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">Q &amp; A：  </span></span>
<span class="line"><span style="color:#24292e;">Q: H5中如何获取当前角色？  </span></span>
<span class="line"><span style="color:#24292e;">A: 开发阶段可通过url上自己拼接roleId (角色ID)，进行对应角色的机制开发</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">Q: token哪里获取？  </span></span>
<span class="line"><span style="color:#24292e;">A: 开发阶段: 可在柒巧空间的剧本编辑中，获取该剧本联调SDK的token  </span></span>
<span class="line"><span style="color:#24292e;">提测&amp;生产阶段：通过url截取token参数值</span></span></code></pre></div>`,2);function P(F,T,H,D,S,q){const e=p("font");return r(),c("div",null,[d,s("blockquote",null,[s("p",null,[u,_,h,x,E,y,n(" 如："),k,n(),b,A,g,m,l(e,{color:"red"},{default:a(()=>[n("小程序&App会自动追加参数")]),_:1}),f,I,s("strong",null,[n("「开发阶段建议把"),l(e,{color:"#ffa657"},{default:a(()=>[n("token")]),_:1}),n("、"),l(e,{color:"#ffa657"},{default:a(()=>[n("roleID")]),_:1}),n("自行拼接到url上，自行截取url参数，以保持与提测、生产阶段一致」")]),v,B])]),l(e,{color:"#ffa657"}),C])}const Q=t(i,[["render",P]]);export{V as __pageData,Q as default};
